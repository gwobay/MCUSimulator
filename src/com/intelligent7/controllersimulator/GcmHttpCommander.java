package com.intelligent7.controllersimulator;

import java.io.BufferedReader;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.Calendar;
import java.util.HashMap;

//import com.kou.utilities.ChatMaster;
//import com.kou.utilities.MainServer;

public class GcmHttpCommander {
	
	
	//private static final Executor threadPool = Executors.newFixedThreadPool(5);

	public static void readFromResourceFile(String fileName, HashMap<String, String> params)
	{
		  
	  BufferedReader reader=null;
	  try {
		  reader = new BufferedReader(new InputStreamReader(new FileInputStream(fileName)));
	  
		  String aLine;
		  while ((aLine=reader.readLine())!=null)
		  {
			  if (aLine.length() < 2) continue;
			  int i0=0; while (aLine.charAt(i0)<= ' ') i0++;
			  int iE=i0; while (++iE<aLine.length() && aLine.charAt(iE) > ' ');
			  String key=aLine.substring(i0, iE).toUpperCase();
			  i0=iE; 
			  while (aLine.charAt(i0)!= '=' && ++i0 <aLine.length());
			  iE=++i0; 
			  while (++iE<aLine.length() && aLine.charAt(iE) > ' ');
			  String value=aLine.substring(i0, iE);//no case change .toUpperCase();
			  if (key.length() > 0)
				  params.put(key, value);
		  }
	    
	  } catch (IOException e) {
		  e.printStackTrace();
	    System.out.println("Could not read file "+fileName);
	  } finally {
	    try {
	      reader.close();
	    } catch (IOException e) {
	    	e.printStackTrace();
	    	System.out.println("Exception closing "+fileName);
	    }
	  }
	    
	}
	
	private static HashMap<String, String> config=new HashMap<String, String>();
	  
	MainServer mServer; //for receive command from commander
	//SendGcmMessager mGcmSender; //for message to GCM
	ChatMaster mChatMaster; 
	void init()
	{
		//mGcmSender=new SendGcmMessager();
		
		readFromResourceFile("CommanderResource", config);
		mServer=new MainServer();
		String sPort=config.get("CMD_PORT");
		if (sPort == null) System.exit(-1);
		mServer.setPort(Integer.parseInt(sPort));
		mServer.setStopTime(0);
		//mServer.addFIXDataSniffer(mGcmSender);
		mServer.start();
		//mServer=new MainServer();
		sPort=config.get("CHAT_PORT");
		if (sPort != null) {
			if (mChatMaster==null) mChatMaster=new ChatMaster();
			mChatMaster.setPort(Integer.parseInt(sPort));
			mChatMaster.setStopTime(0);
			mChatMaster.start();
		}
		//mGcmSender=new SendGcmMessager();
		//mGcmSender.putInstruction("test line", "|170=agenda|151=2014-07-21|152=21:20|153=11Ã§Å“â€¹Ã©â‚¬ï¿½Ã¦â€“Â°Ã¨ï¿½Å¾19|154=Ã¤Â¸Â­Ã¦Â­Â£Ã¥ï¿½â‚¬Ã¥Â¿Â Ã¥Â­ï¿½Ã¨Â¥Â¿Ã¨Â·Â¯1Ã¦Â®Âµ72Ã¨â„¢Å¸62Ã¦Â¨â€œ|155=Ã¥ï¿½Â°Ã¥Å’â€”Ã¥Â¸â€š|157=0986055745|156=Ã©â€žÂ­Ã¥Â¼ËœÃ¥â€žâ‚¬|158=Ã£â‚¬Å’Ã¤Â½â€ Ã¦ËœÂ¯Ã¦Ë†â€˜Ã¥â‚¬â€˜Ã§Å“Å¸Ã§Å¡â€žÃ¤Â¸ï¿½Ã¨Â¦ï¿½Ã¥Â°ï¿½Ã§Å“â€¹Ã¥Å“â€¹Ã¦Â°â€˜Ã©Â»Â¨Ã¯Â¼Å’Ã§â€¢Â¢Ã§Â«Å¸Ã¦ËœÂ¯Ã§â„¢Â¾Ã¥Â¹Â´Ã¨â‚¬ï¿½Ã¥Âºâ€”Ã¯Â¼Å’Ã¥Â®Æ’Ã¥Å“Â¨Ã¥Å¸ÂºÃ¥Â±Â¤Ã§Å¡â€žÃ§Âµâ€žÃ§Â¹â€?Ã¥â€¦Â¶Ã¥Â¯Â¦Ã¦ËœÂ¯Ã¦Â»Â¿Ã¥Â®Å’Ã¦â€¢Â´Ã§Å¡â€žÃ¯Â¼Å’Ã¥ï¿½ÂªÃ¨Â¦ï¿½Ã¨Â³â€¡Ã¦Âºï¿½Ã¤Â¸â€¹Ã¥Å½Â»Ã¯Â¼Å’Ã¥Â®Æ’Ã§Å¡â€žÃ¥â€¹â€¢Ã¥â€œÂ¡Ã¦ËœÂ¯Ã©ï¿½Å¾Ã¥Â¸Â¸Ã¥Â¿Â«Ã§Å¡â€žÃ£â‚¬ï¿½Ã£â‚¬â€šÃ©Â Ë†Ã¤Â»Â¥Ã¤Â¸â‚¬Ã¥â‚¬â€¹Ã¨Â¬Â¹Ã¦â€¦Å½Ã¦â€¦â€¹Ã¥ÂºÂ¦Ã¤Â¾â€ Ã©ï¿½Â¢Ã¥Â°ï¿½Ã¤ÂºÅ’Ã¢â€”â€¹Ã¤Â¸â‚¬Ã¥â€ºâ€ºÃ§Å¡â€žÃ©ï¿½Â¸Ã¨Ë†â€°Ã£â‚¬â€š");
		//mGcmSender.putInstruction("test line", "|170=agenda|151=2014-07-22|152=19:20|153=22Ã¦â€“Â°Ã¤Â¸â€°Ã¦Â°â€˜Ã¤Â¸Â»Ã§Â¾Â©19Ã¯Â¼Å¡Ã¥ÂºÂ¶Ã¦Â°â€˜Ã£â‚¬ï¿½Ã©â€žâ€°Ã¦Â°â€˜Ã£â‚¬ï¿½Ã¥â€¦Â¬Ã¦Â°â€˜|154=Ã¤Â¸Â­Ã¦Â­Â£Ã¥ï¿½â‚¬Ã¥Â¿Â Ã¥Â­ï¿½Ã¨Â¥Â¿Ã¨Â·Â¯1Ã¦Â®Âµ72Ã¨â„¢Å¸62Ã¦Â¨â€œ|155=Ã¥ï¿½Â°Ã¥Å’â€”Ã¥Â¸â€š|157=0946056745|156=Ã¦Å¸Â¯Ã¦â€“â€¡Ã¥â€œÂ²|158=Ã£â‚¬Å’Ã§â€šÂºÃ¦Â­Â¤Ã§Â©ï¿½Ã¦Â¥ÂµÃ¥â€šâ„¢Ã¦Ë†Â°Ã¯Â¼Å’Ã¨Â¿â€˜Ã¦â€”Â¥Ã¥â€¢Å¸Ã¥â€¹â€¢Ã©ï¿½â€™Ã¥Â¹Â´Ã¦ÂµÂ·Ã©ï¿½Â¸Ã¨Â¨Ë†Ã§â€¢Â«Ã¥ï¿½Â¬Ã¥â€¹Å¸Ã§Â«Â¶Ã©ï¿½Â¸Ã¥Å“ËœÃ©Å¡Å Ã¤ÂºÂºÃ¦â€°ï¿½Ã¯Â¼Å’Ã¤Â¸Â¦Ã¦ï¿½ï¿½Ã¥â€¡ÂºÃ¥ÂºÂ¶Ã¦Â°â€˜Ã¤Â¸Â»Ã§Â¾Â©Ã£â‚¬ï¿½Ã©â€žâ€°Ã¦Â°â€˜Ã¤Â¸Â»Ã§Â¾Â©Ã£â‚¬ï¿½Ã¥â€¦Â¬Ã¦Â°â€˜Ã¤Â¸Â»Ã§Â¾Â©Ã§Å¡â€žÃ£â‚¬Å’Ã¦â€“Â°Ã¤Â¸â€°Ã¦Â°â€˜Ã¤Â¸Â»Ã§Â¾Â©Ã£â‚¬ï¿½Ã¯Â¼Å’Ã§â€ºÂ¼Ã©â‚¬ï¿½Ã©ï¿½Å½Ã§Â¶Â²Ã¨Â·Â¯Ã¥ï¿½â€˜Ã¥Â¹Â´Ã¨Â¼â€¢Ã¤Â¸â€“Ã¤Â»Â£Ã¦â€¹â€ºÃ¦â€°â€¹Ã£â‚¬â€šÃ£â‚¬â€š");
		//mGcmSender.putInstruction("test line", "|170=agenda|151=2014-07-23|152=17:20|153=33Ã¨Ë†â€°Ã¨Â¾Â¦Ã¦ÂµÂ·Ã©ï¿½Â¸Ã©ï¿½Â¢Ã¨Â©Â¦19|154=Ã¤Â¸Â­Ã¦Â­Â£Ã¥ï¿½â‚¬Ã¥Â¿Â Ã¥Â­ï¿½Ã¨Â¥Â¿Ã¨Â·Â¯1Ã¦Â®Âµ72Ã¨â„¢Å¸62Ã¦Â¨â€œ|155=Ã¥ï¿½Â°Ã¥Å’â€”Ã¥Â¸â€š|157=0986066745|156=Ã¦Å¸Â¯Ã¦â€“â€¡Ã¥â€œÂ²|158=Ã£â‚¬Å’Ã¤Â½â€ Ã¦ËœÂ¯Ã¦Ë†â€˜Ã¥â‚¬â€˜Ã§Å“Å¸Ã§Å¡â€žÃ¤Â¸ï¿½Ã¨Â¦ï¿½Ã¥Â°ï¿½Ã§Å“â€¹Ã¥Å“â€¹Ã¦Â°â€˜Ã©Â»Â¨Ã¯Â¼Å’Ã§â€¢Â¢Ã§Â«Å¸Ã¦ËœÂ¯Ã§â„¢Â¾Ã¥Â¹Â´Ã¨â‚¬ï¿½Ã¥Âºâ€”Ã¯Â¼Å’Ã¥Â®Æ’Ã¥Å“Â¨Ã¥Å¸ÂºÃ¥Â±Â¤Ã§Å¡â€žÃ§Âµâ€žÃ§Â¹â€?Ã¥â€¦Â¶Ã¥Â¯Â¦Ã¦ËœÂ¯Ã¦Â»Â¿Ã¥Â®Å’Ã¦â€¢Â´Ã§Å¡â€žÃ¯Â¼Å’Ã¥ï¿½ÂªÃ¨Â¦ï¿½Ã¨Â³â€¡Ã¦Âºï¿½Ã¤Â¸â€¹Ã¥Å½Â»Ã¯Â¼Å’Ã¥Â®Æ’Ã§Å¡â€žÃ¥â€¹â€¢Ã¥â€œÂ¡Ã¦ËœÂ¯Ã©ï¿½Å¾Ã¥Â¸Â¸Ã¥Â¿Â«Ã§Å¡â€žÃ£â‚¬ï¿½Ã£â‚¬â€šÃ©Â Ë†Ã¤Â»Â¥Ã¤Â¸â‚¬Ã¥â‚¬â€¹Ã¨Â¬Â¹Ã¦â€¦Å½Ã¦â€¦â€¹Ã¥ÂºÂ¦Ã¤Â¾â€ Ã©ï¿½Â¢Ã¥Â°ï¿½Ã¤ÂºÅ’Ã¢â€”â€¹Ã¤Â¸â‚¬Ã¥â€ºâ€ºÃ§Å¡â€žÃ©ï¿½Â¸Ã¨Ë†â€°Ã£â‚¬â€š");
		//mGcmSender.putInstruction("test line", "|170=agenda|151=2014-07-24|152=19:20|153=44Ã§Å“â€¹Ã©â‚¬ï¿½Ã¦â€“Â°Ã¨ï¿½Å¾19|154=Ã¤Â¸Â­Ã¦Â­Â£Ã¥ï¿½â‚¬Ã¥Â¿Â Ã¥Â­ï¿½Ã¨Â¥Â¿Ã¨Â·Â¯1Ã¦Â®Âµ72Ã¨â„¢Å¸62Ã¦Â¨â€œ|155=Ã¥ï¿½Â°Ã¥Å’â€”Ã¥Â¸â€š|157=0986056845|156=Ã©â€žÂ­Ã¥Â¼ËœÃ¥â€žâ‚¬|158=Ã£â‚¬Å’Ã¤Â½â€ Ã¦ËœÂ¯Ã¦Ë†â€˜Ã¥â‚¬â€˜Ã§Å“Å¸Ã§Å¡â€žÃ¤Â¸ï¿½Ã¨Â¦ï¿½Ã¥Â°ï¿½Ã§Å“â€¹Ã¥Å“â€¹Ã¦Â°â€˜Ã©Â»Â¨Ã¯Â¼Å’Ã§â€¢Â¢Ã§Â«Å¸Ã¦ËœÂ¯Ã§â„¢Â¾Ã¥Â¹Â´Ã¨â‚¬ï¿½Ã¥Âºâ€”Ã¯Â¼Å’Ã¥Â®Æ’Ã¥Å“Â¨Ã¥Å¸ÂºÃ¥Â±Â¤Ã§Å¡â€žÃ§Âµâ€žÃ§Â¹â€?Ã¥â€¦Â¶Ã¥Â¯Â¦Ã¦ËœÂ¯Ã¦Â»Â¿Ã¥Â®Å’Ã¦â€¢Â´Ã§Å¡â€žÃ¯Â¼Å’Ã¥ï¿½ÂªÃ¨Â¦ï¿½Ã¨Â³â€¡Ã¦Âºï¿½Ã¤Â¸â€¹Ã¥Å½Â»Ã¯Â¼Å’Ã¥Â®Æ’Ã§Å¡â€žÃ¥â€¹â€¢Ã¥â€œÂ¡Ã¦ËœÂ¯Ã©ï¿½Å¾Ã¥Â¸Â¸Ã¥Â¿Â«Ã§Å¡â€žÃ£â‚¬ï¿½Ã£â‚¬â€šÃ©Â Ë†Ã¤Â»Â¥Ã¤Â¸â‚¬Ã¥â‚¬â€¹Ã¨Â¬Â¹Ã¦â€¦Å½Ã¦â€¦â€¹Ã¥ÂºÂ¦Ã¤Â¾â€ Ã©ï¿½Â¢Ã¥Â°ï¿½Ã¤ÂºÅ’Ã¢â€”â€¹Ã¤Â¸â‚¬Ã¥â€ºâ€ºÃ§Å¡â€žÃ©ï¿½Â¸Ã¨Ë†â€°Ã£â‚¬â€š");
		//System.out.println("Sending @ "+Calendar.getInstance().getTime());
		//mGcmSender.start();
	}
	/*
	Ã§Â¶Â Ã§â€¡Å¸Ã¥ï¿½Â°Ã¥Å’â€”Ã¥Â¸â€šÃ©â€¢Â·Ã¥Ë†ï¿½Ã©ï¿½Â¸Ã¯Â¼Å’Ã¦Â°â€˜Ã©â‚¬Â²Ã©Â»Â¨Ã§Â«â€¹Ã¥Â§â€?Ã¥Â§Å¡Ã¦â€“â€¡Ã¦â„¢ÂºÃ¨Ë†â€¡Ã§â€žÂ¡Ã©Â»Â¨Ã§Â±ï¿½Ã¥ï¿½Â°Ã¥Â¤Â§Ã©â€ Â«Ã¥Â¸Â«Ã¦Å¸Â¯Ã¦â€“â€¡Ã¥â€œÂ²6Ã¦Å“Ë†12Ã¦â€”Â¥Ã¥Â°â€¡Ã¤Â»Â¥Ã¦Â°â€˜Ã¨ÂªÂ¿Ã¦Â±ÂºÃ¥â€¹ï¿½Ã¨Â²Â Ã£â‚¬â€š
	Ã¥Â§Å¡Ã£â‚¬ï¿½Ã¦Å¸Â¯Ã¦ËœÂ¨Ã¥ï¿½â€?Ã¨ÂªÂ¿Ã©ï¿½â€?Ã¦Ë†ï¿½Ã¥â€¦Â±Ã¨Â­ËœÃ¯Â¼Å’Ã¦Â°â€˜Ã¨ÂªÂ¿Ã¥â€°ï¿½Ã¥Â°â€¡Ã¥Å“Â¨8Ã¥Â¤Â©Ã¥â€¦Â§Ã¨Ë†â€°Ã¨Â¾Â¦3Ã¥Â Â´Ã¨Â¾Â¯Ã¨Â«â€“Ã¥ï¿½Å Ã¦â€?Â¿Ã¨Â¦â€¹Ã¦Å“Æ’Ã¯Â¼Å’
	Ã¥ï¿½Â°Ã¥Å’â€”Ã¥Â¸â€šÃ©â€¢Â·Ã¤ÂºÂºÃ©ï¿½Â¸Ã¥Â°â€¡Ã¥Å“Â¨Ã¥â€°ï¿½Ã¤Â¸Â»Ã¥Â¸Â­Ã¨â€?Â¡Ã¨â€¹Â±Ã¦â€“â€¡Ã¥â€ºÅ¾Ã©ï¿½â€¹Ã©Â»Â¨Ã©Â­ï¿½Ã¥Â¾Å’Ã¥Â®Å’Ã¦Ë†ï¿½Ã¦ï¿½ï¿½Ã¥ï¿½ï¿½Ã£â‚¬â€š

	Ã¥ï¿½Â°Ã¥Å’â€”Ã¥Â¸â€šÃ©â€¢Â·Ã¥ï¿½Æ’Ã©ï¿½Â¸Ã¤ÂºÂºÃ¥ï¿½Â°Ã¥Â¤Â§Ã©â€ Â«Ã¥Â¸Â«Ã¦Å¸Â¯Ã¦â€“â€¡Ã¥â€œÂ²Ã¯Â¼Å’Ã¦ËœÂ¨Ã¥â€°ï¿½Ã¥Â¾â‚¬Ã¥Â£Â«Ã¦ï¿½Â±Ã¥Â¸â€šÃ¥Â Â´Ã¦â€¹Å“Ã§Â¥Â¨Ã¯Â¼Å’Ã¤Â»â€“Ã¨Â¡Â¨Ã§Â¤ÂºÃ¯Â¼Å’
	Ã¦Â°â€˜Ã§Å“Â¾Ã§Å¡â€žÃ©Â£Å¸Ã¨Â¡Â£Ã¤Â½ï¿½Ã¨Â¡Å’Ã¨â€šÂ²Ã¦Â¨â€šÃ£â‚¬Å’Ã¦Â¯â€?Ã¨Å Â±Ã¥ï¿½Å¡Ã¥â€™Å’Ã¤Â¸â€“Ã¥Â¤Â§Ã©ï¿½â€¹Ã©â€¡ï¿½Ã¨Â¦ï¿½Ã£â‚¬ï¿½Ã¯Â¼Å’Ã¨â€¹Â¥Ã§â€¢Â¶Ã©ï¿½Â¸Ã¥Â¸â€šÃ©â€¢Â·Ã¯Â¼Å’Ã¦Å“Æ’Ã¥â€žÂªÃ¥â€¦Ë†Ã§Â·Â¨Ã©Â ï¿½Ã§Â®â€”Ã¦â€?Â¹Ã¥Â»ÂºÃ¦â€°â‚¬Ã¦Å“â€°Ã¥â€¦Â¬Ã¦Å“â€°Ã¥Â¸â€šÃ¥Â Â´Ã£â‚¬â€š

	Ã£â‚¬Å’Ã¦Å¸Â¯PÃ¤Â¾â€ Ã¥â€ºâ€°Ã¯Â¼ï¿½Ã¦Å¸Â¯PÃ¤Â¾â€ Ã¥â€ºâ€°Ã¯Â¼ï¿½Ã£â‚¬ï¿½Ã¦ËœÂ¨Ã¥Â¤Â©Ã¤Â¸Å Ã¥ï¿½Ë†Ã¥Â£Â«Ã¦ï¿½Â±Ã¥Â¸â€šÃ¥Â Â´Ã¤ÂºÂºÃ¨ï¿½Â²Ã©Â¼Å½Ã¦Â²Â¸Ã¯Â¼Å’Ã¦Å¸Â¯Ã¦â€“â€¡Ã¥â€œÂ²Ã¥Ë†Â°Ã¥Â Â´Ã¥Â¾Å’Ã¤Â¸â‚¬Ã¦â€?Â¤Ã¦â€?Â¤Ã¦ï¿½Â¡Ã¦â€°â€¹Ã¨â€¡Â´Ã¦â€žï¿½
	Ã¯Â¼Å’Ã¤Â¸â‚¬Ã©â€šÅ Ã¨Â§â‚¬Ã¥Â¯Å¸Ã¥Â¸â€šÃ¥Â Â´Ã¨Â¨Â­Ã¥â€šâ„¢Ã¯Â¼Å’Ã¦Å“â€°Ã¨Â²Â·Ã¨ï¿½Å“Ã¦Â°â€˜Ã§Å“Â¾Ã¨Â¦ï¿½Ã¦Â±â€šÃ¥ï¿½Ë†Ã§â€¦Â§Ã¯Â¼Å’Ã¤Â¹Å¸Ã¦Å“â€°Ã¤ÂºÂºÃ§Â¬â€˜Ã¨â€˜â€”Ã¥â€™Å’Ã¤Â»â€“Ã¨ÂªÂªÃ£â‚¬Å’Ã¦Å“Â¬Ã¤ÂºÂºÃ¦Â¯â€?Ã¨Â¼Æ’Ã¨â€¹Â±Ã¤Â¿Å Ã¥â€“â€?Ã£â‚¬ï¿½Ã£â‚¬â€š

	Ã¦Å¸Â¯Ã¦â€“â€¡Ã¥â€œÂ²Ã¨ÂªÂªÃ¯Â¼Å’Ã§â€¢Â¶Ã¤Âºâ€ Ã¥Â»Â¿Ã¥Â¹Â¾Ã¥Â¹Â´Ã¥Â¤â€“Ã§Â§â€˜Ã©â€ Â«Ã¥Â¸Â«Ã¯Â¼Å’Ã¥â‚¬â€¹Ã¦â‚¬Â§Ã¨Â®Å Ã¥Â¾â€”Ã¥Â¾Ë†Ã¦â‚¬Â¥Ã¯Â¼Å’Ã£â‚¬Å’Ã¥ï¿½Å¡Ã¤Â¸â‚¬Ã¤Â»Â¶Ã¤Âºâ€¹Ã¥Â°Â±Ã¦Æ’Â³Ã¥Ë†Â°Ã¤Â¸â€¹Ã¤Â¸â‚¬Ã¦Â­Â¥Ã£â‚¬ï¿½Ã¯Â¼Å’
	Ã¦Â­Â£Ã¥Å“Â¨Ã¥Å ÂªÃ¥Å â€ºÃ¦â€?Â¹Ã©â‚¬Â²Ã¯Â¼Å’Ã¥Æ’ï¿½Ã¦ËœÂ¯Ã¦ï¿½Â¡Ã¦â€°â€¹Ã¦â„¢â€šÃ¨Â¦ï¿½Ã§Å“â€¹Ã¨â€˜â€”Ã¥Â°ï¿½Ã¦â€“Â¹Ã§Å“Â¼Ã§ï¿½â€ºÃ¯Â¼Å’Ã¤Â¸ï¿½Ã¨Æ’Â½Ã¥ï¿½Â·Ã§Å“â€¹Ã¥Ë†Â¥Ã¨â„¢â€¢Ã¯Â¼Å’Ã¥Â°Â±Ã¦ËœÂ¯Ã¨Â¦ï¿½Ã¨Â¨â€œÃ§Â·Â´Ã§Å¡â€žÃ£â‚¬Å’Ã¥Å¸ÂºÃ¦Å“Â¬Ã¥Å Å¸Ã£â‚¬ï¿½Ã£â‚¬â€š

	Ã¨Â¨Â±Ã¥Â¤Å¡Ã¥Â¸â€šÃ¥Â Â´Ã¦â€?Â¤Ã¥â€¢â€ Ã©Â¼â€œÃ¥â€¹ÂµÃ¦Å¸Â¯Ã¦â€“â€¡Ã¥â€œÂ²Ã¥Å Â Ã¦Â²Â¹Ã¯Â¼Å’Ã¤Â»â€“Ã¨Â¡Â¨Ã§Â¤ÂºÃ¯Â¼Å’Ã¥ï¿½Æ’Ã¨Â§â‚¬Ã©ï¿½Å½Ã¨Â¨Â±Ã¥Â¤Å¡Ã¥â€šÂ³Ã§ÂµÂ±Ã¥Â¸â€šÃ¥Â Â´Ã¯Â¼Å’Ã§â€™Â°Ã¥Â¢Æ’Ã©Æ’Â½Ã¥Â¾Ë†Ã©Â«â€™Ã¤Âºâ€šÃ¯Â¼Å’
	Ã¨â€¹Â¥Ã§â€¢Â¶Ã©ï¿½Â¸Ã¥Â¸â€šÃ©â€¢Â·Ã¯Â¼Å’Ã§Â·Â¨Ã¥Ë†â€”Ã©Â ï¿½Ã§Â®â€”Ã¦â„¢â€šÃ¯Â¼Å’Ã£â‚¬Å’Ã¤Â¸ï¿½Ã¦Å“Æ’Ã¥Å½Â»Ã¨Â¾Â¦Ã¨Å Â±Ã¥ï¿½Å¡Ã£â‚¬ï¿½Ã¯Â¼Å’Ã¨â‚¬Å’Ã¦ËœÂ¯Ã¥â€žÂªÃ¥â€¦Ë†Ã¦â€?Â¹Ã¥Â»ÂºÃ¦â€°â‚¬Ã¦Å“â€°Ã¥â€¦Â¬Ã¦Å“â€°Ã¥Â¸â€šÃ¥Â Â´Ã£â‚¬â€š

	
	*/

	void joinThreads()
	{
		try {
		if (mServer != null) mServer.join();
		//if (mGcmSender != null) mGcmSender.join();
		} catch (InterruptedException e){
			e.printStackTrace();
		}
		
		mServer.setStopTime(1);
		//mGcmSender.setStopTime(1);
	}

	public static void main(String[] args) {
		GcmHttpCommander aCmd=new GcmHttpCommander();
		aCmd.init();
		aCmd.joinThreads();		
	}

}
